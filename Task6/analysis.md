# Отчёт по результатам анализа Kubernetes Audit Log

```bash
minikube start  --extra-config=apiserver.audit-policy-file=/etc/ssl/certs/audit-policy.yaml  --extra-config=apiserver.audit-log-path=/var/log/audit.log
```

## Подозрительные события

1. Доступ к секретам:
    - Кто: Пользователь monitoring
    - Где: kubectl auth can-i get secrets
    - Почему подозрительно: проверяет может ли получить достпуп к сикретам. Хочет получить доступ к служебному неймспейсу кубера хотя сам monitoring

2. Привилегированные поды:
    - Кто: Пользователь monitoring
    - Комментарий: При установленном флаге privileged среда выполнения контейнеров предоставляет полный доступ к файловой системе хоста

3. Использование kubectl exec в чужом поде:
    - Кто: Пользователь monitoring
    - Что делал: Поменял настройки dns для пода

4. Создание RoleBinding с правами cluster-admin:
    - Кто: Пользователь monitoring
    - К чему привело: Можно получить доступ ко всем ресурсам кластера и удалять и создавать различные ресурсы

5. Удаление audit-policy.yaml:
    - Кто: админ
    - Возможные последствия: удаление файла позволит производить различные действия в кубере не привлекая к себе внимания. Рекомендую в атаке начинать именно с этого

## Вывод

Необходимо продумать политику доступа к ресурсам, выбать пользователям только те права которые нужны для них работы. Обязательно добавить аудит для подозрительных действий
